<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Logger</title>
    <link rel="stylesheet" href="style.css">
    <script defer>
        document.addEventListener('DOMContentLoaded', () => {
            const logIpButton = document.getElementById('logIpButton');
            const statusMessage = document.getElementById('errorMessage');

            logIpButton.addEventListener('click', async () => {
                statusMessage.textContent = 'Logging your visit...';
                statusMessage.style.color = '#333';
                try {
                    const res = await fetch('logip.php', { method: 'POST' });
                    if (!res.ok) throw new Error(`HTTP ${res.status}`);
                    const data = await res.json().catch(() => ({}));
                    if (data && data.status === 'ok') {
                        statusMessage.textContent = 'Your IP has been logged successfully!';
                        statusMessage.style.color = 'green';
                    } else {
                        statusMessage.textContent = 'Logged, but response was unexpected.';
                        statusMessage.style.color = 'orange';
                    }
                } catch (err) {
                    console.error('Error logging IP:', err);
                    statusMessage.textContent = 'Error logging your IP.';
                    statusMessage.style.color = 'red';
                }
            });
        });
    </script>
</head>
<body>
    <div class="container">
        <h1>Click the Button Below</h1>
        <button id="logIpButton">Click Here</button>
        <p class="error" id="errorMessage" aria-live="polite"></p>
    </div>
</body>
</html>
